{
  "version": "1.0",
  "description": "场景10：多对多 - RBAC权限模型（用户⟷角色⟷权限，双层多对多）",
  "tables": [
    {
      "name": "sys_user",
      "description": "系统用户",
      "primaryKey": "id",
      "fields": [
        { "name": "id", "type": "number", "required": true, "autoIncrement": true, "comment": "主键ID" },
        { "name": "username", "type": "string", "length": 50, "required": true, "unique": true, "comment": "用户名" },
        { "name": "password", "type": "string", "length": 128, "required": true, "comment": "密码" },
        { "name": "real_name", "type": "string", "length": 50, "required": false, "comment": "真实姓名" },
        { "name": "email", "type": "string", "length": 100, "format": "email", "required": false, "comment": "邮箱" },
        { "name": "status", "type": "number", "required": true, "default": 1, "comment": "状态: 0禁用 1启用", "enum": [0, 1] }
      ]
    },
    {
      "name": "sys_role",
      "description": "角色",
      "primaryKey": "id",
      "fields": [
        { "name": "id", "type": "number", "required": true, "autoIncrement": true, "comment": "主键ID" },
        { "name": "role_key", "type": "string", "length": 50, "required": true, "unique": true, "comment": "角色标识(如admin)" },
        { "name": "role_name", "type": "string", "length": 50, "required": true, "comment": "角色名称" },
        { "name": "description", "type": "string", "length": 200, "required": false, "comment": "角色描述" },
        { "name": "sort_order", "type": "number", "required": false, "default": 0, "comment": "排序" }
      ]
    },
    {
      "name": "sys_permission",
      "description": "权限",
      "primaryKey": "id",
      "fields": [
        { "name": "id", "type": "number", "required": true, "autoIncrement": true, "comment": "主键ID" },
        { "name": "perm_key", "type": "string", "length": 100, "required": true, "unique": true, "comment": "权限标识(如user:create)" },
        { "name": "perm_name", "type": "string", "length": 50, "required": true, "comment": "权限名称" },
        { "name": "resource_type", "type": "string", "length": 20, "required": true, "comment": "资源类型: menu/button/api" },
        { "name": "parent_id", "type": "number", "required": false, "default": 0, "comment": "父权限ID(树形)" }
      ]
    },
    {
      "name": "sys_user_role",
      "description": "用户角色关联",
      "primaryKey": "id",
      "fields": [
        { "name": "id", "type": "number", "required": true, "autoIncrement": true, "comment": "主键ID" },
        { "name": "user_id", "type": "number", "required": true, "comment": "用户ID" },
        { "name": "role_id", "type": "number", "required": true, "comment": "角色ID" }
      ]
    },
    {
      "name": "sys_role_permission",
      "description": "角色权限关联",
      "primaryKey": "id",
      "fields": [
        { "name": "id", "type": "number", "required": true, "autoIncrement": true, "comment": "主键ID" },
        { "name": "role_id", "type": "number", "required": true, "comment": "角色ID" },
        { "name": "permission_id", "type": "number", "required": true, "comment": "权限ID" }
      ]
    }
  ],
  "relations": [
    { "from": "sys_user_role", "to": "sys_user", "type": "many-to-many", "foreignKey": "user_id", "referenceKey": "id" },
    { "from": "sys_user_role", "to": "sys_role", "type": "many-to-many", "foreignKey": "role_id", "referenceKey": "id" },
    { "from": "sys_role_permission", "to": "sys_role", "type": "many-to-many", "foreignKey": "role_id", "referenceKey": "id" },
    { "from": "sys_role_permission", "to": "sys_permission", "type": "many-to-many", "foreignKey": "permission_id", "referenceKey": "id" }
  ]
}
